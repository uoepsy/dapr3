---
title: "Confirmatory Factor Analysis (CFA)"
editor_options: 
  chunk_output_type: console
editor: 
  markdown: 
    wrap: 72
---


```{r}
#| label: setup
#| include: false
library(tidyverse)
library(patchwork)
library(psych)
library(lavaan)
source('_theme/theme_quarto.R')
```

# Course Overview

```{r}
#| results: "asis"
block1_name = "multilevel modelling<br>working with group structured data"
block1_lecs = c("regression refresher",
                "the multilevel model",
                "more complex groupings",
                "centering, assumptions, and diagnostics",
                "recap")
block2_name = "factor analysis<br>working with multi-item measures"
block2_lecs = c(
  "measurement and dimensionality",
  "exploring underlying constructs (EFA)",
  "testing theoretical models (CFA)",
  "reliability and validity",
  "recap & exam prep"
  )

source("https://raw.githubusercontent.com/uoepsy/junk/main/R/course_table.R")
course_table(block1_name,block2_name,block1_lecs,block2_lecs,week=8)
```

# This week {transition="slide"}

- CFA vs EFA
- CFA in R (lavaan)
- Model Fit
- Latent Variable Scaling

# from EFA to CFA

## What is your quest?  

too many correlated variables. need to reduce >> PCA

want to understand underlying structure of a set of correlated variables >> EFA

want to test a theoretical structure underlying a set of variables >> CFA

## EFA in diagrams

non rotated
rotated

## CFA in diagrams

absence of arrows = theoretical constraint

# CFA in R

## lavaan package

"latent variable analysis"

## steps

1. specify
2. estimate

6 steps of SEM?

## example



# testing/evaluating fit

## it's a model!  

cov matrix vs model implied cov matrix

## diagrams imply things! 

## model fit

## degrees of freedom



## fit indices


## parameter estimates


## latent variable scaling


# structural equation modelling

all this error, what should we do? model it!  

## structural vs measurement parts

## all measured at once


## example
















