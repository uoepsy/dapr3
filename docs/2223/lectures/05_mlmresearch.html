<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Multi-level Model Research Questions</title>
    <meta charset="utf-8" />
    <meta name="author" content="Josiah King" />
    <script src="jk_libs/libs/header-attrs/header-attrs.js"></script>
    <script src="jk_libs/libs/clipboard/clipboard.min.js"></script>
    <link href="jk_libs/libs/shareon/shareon.min.css" rel="stylesheet" />
    <script src="jk_libs/libs/shareon/shareon.min.js"></script>
    <link href="jk_libs/libs/xaringanExtra-shareagain/shareagain.css" rel="stylesheet" />
    <script src="jk_libs/libs/xaringanExtra-shareagain/shareagain.js"></script>
    <link href="jk_libs/libs/tile-view/tile-view.css" rel="stylesheet" />
    <script src="jk_libs/libs/tile-view/tile-view.js"></script>
    <link href="jk_libs/libs/animate.css/animate.xaringan.css" rel="stylesheet" />
    <link href="jk_libs/libs/tachyons/tachyons.min.css" rel="stylesheet" />
    <link href="jk_libs/libs/xaringanExtra-extra-styles/xaringanExtra-extra-styles.css" rel="stylesheet" />
    <link rel="stylesheet" href="xaringan-themer.css" type="text/css" />
    <link rel="stylesheet" href="jk_libs/tweaks.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

.title[
# <b>Multi-level Model Research Questions</b>
]
.subtitle[
## Data Analysis for Psychology in R 3
]
.author[
### Josiah King
]
.institute[
### Department of Psychology<br/>The University of Edinburgh
]

---





class: inverse, center, middle

&lt;h2&gt;Part 1: Model Specification&lt;/h2&gt;
&lt;h2 style="text-align: left;opacity:0.3;"&gt;Part 2: Analysis&lt;/h2&gt;
&lt;h2 style="text-align: left;opacity:0.3;"&gt;Part 3: Reporting&lt;/h2&gt;

---
class: center, middle
# How do we get from research questions and study design to model specification?  

---
# Study 
In 2010 A US state's commissioner for education approved the trialing of an intervention in which yearly Parent Management Training (PMT) group sessions were offered to the parents of a cohort of students entering 10 different high schools. Every year, the parents were asked to fill out an informant-based version of the Aggressive Behaviour Scale (ABS), measuring verbal and physical abuse, socially inappropriate behavior, and resisting care. Where possible, the same parents were followed up throughout the child's progression through high school.  
Alongside this, parents from a cohort of students entering 10 further high schools in the state were recruited to also complete the same informant-based ABS, but were not offered the PMT group sessions.  

1. How does the presentation of aggressive behaviours change with age? 

2. Is there any evidence for the efficacy of Parent Management Training (PMT) group sessions in reducing levels of adolescent aggression?  

The data is available at https://uoepsy.github.io/data/abs_intervention.csv 

---
# Data

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; variable &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; description &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; schoolid &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Name of school &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; ppt &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Participant number &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; age &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Age of participant (in years) at observation &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; ABS &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Informant-based Aggressive Behaviour Scale (ABS) score (range 0 to 100) &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; interv &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Whether or not the school was part of the intervention group in which Parent Management Training (PMT) group sessions were offered to the parents &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;


```r
absint&lt;-read_csv("https://uoepsy.github.io/data//abs_intervention.csv") %&gt;% mutate(interv=factor(interv))
head(absint)
```

```
## # A tibble: 6 × 5
##   schoolid                 ppt   age   ABS interv
##   &lt;chr&gt;                  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;fct&gt; 
## 1 Blue River High School     1    12  64.9 1     
## 2 Blue River High School     1    13  54.7 1     
## 3 Blue River High School     1    14  45.7 1     
## 4 Blue River High School     1    15  48.9 1     
## 5 Blue River High School     1    16  39.0 1     
## 6 Blue River High School     1    17  32.3 1
```

---
# Outcome and Fixed Effects  

.br2.f4.gray.bg-white[
(g)lmer(**outcome** ~ fixed effects + (random effects | grouping structure), family = error distribution)
]

.pull-left[
- What are we interested in explaining/predicting?  

]

.pull-right[
&gt; **Research Questions**
&gt; 1. How does the presentation of aggressive behaviours change with age?  

&gt;2. Is there any evidence for the efficacy of Parent Management Training (PMT) group sessions in reducing levels of adolescent aggression? 

]

---
count:false
# Outcome and Fixed Effects  

.br2.f4.gray.bg-white[
**(g)lmer**(outcome ~ fixed effects + (random effects | grouping structure), **family = error distribution**)
]

.pull-left[

- What are we interested in explaining/predicting?  

  - How is this measured?

]
.pull-right[
&gt; **Research Questions**
&gt; 1. How does the presentation of aggressive behaviours change with age?  

&gt;2. Is there any evidence for the efficacy of Parent Management Training (PMT) group sessions in reducing levels of adolescent aggression? 


```r
ggplot(absint, aes(x=ABS))+
  geom_histogram()
```

![](05_mlmresearch_files/figure-html/unnamed-chunk-3-1.svg)&lt;!-- --&gt;


]

---
count:false
# Outcome and Fixed Effects  

.br2.f4.gray.bg-white[
(g)lmer(outcome ~ **fixed effects** + (random effects | grouping structure), family = error distribution)
]

.pull-left[

- What are we interested in explaining/predicting?  

  - How is this measured?

- What variables are we interested in explaining this by?  

]
.pull-right[
&gt; **Research Questions**
&gt; 1. How does the presentation of aggressive behaviours change with age?  

&gt;2. Is there any evidence for the efficacy of Parent Management Training (PMT) group sessions in reducing levels of adolescent aggression? 

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; schoolid &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; ppt &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; age &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; ABS &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; interv &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Blue River High School &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 12 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 64.9 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Blue River High School &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 13 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 54.7 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Blue River High School &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 14 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 45.7 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Blue River High School &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 15 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 48.9 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; ... &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; ... &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; ... &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; ... &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; NA &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

]

---
# Within &amp; Between Effects

.br2.f4.gray.bg-white[
(g)lmer(outcome ~ **fixed effects** + (random effects | grouping structure), family = error distribution)
]

.pull-left[

- Are our questions about the effects of our predictors specifically in reference to _group means_ of predictors?  

  - "the effect of being higher on `\(x\)` *__for a__* group"  
  
  - "the effect of a group being *__on average__* higher on `\(x\)`" 

]
.pull-right[
&gt; **Research Questions**
&gt; 1. How does the presentation of aggressive behaviours change with age?  

&gt;2. Is there any evidence for the efficacy of Parent Management Training (PMT) group sessions in reducing levels of adolescent aggression? 

]

---
# The Grouping Structure  

.br2.f4.gray.bg-white[
(g)lmer(outcome ~ fixed effects + (random effects | grouping structure), family = error distribution)
]

.pull-left[
- In what different ways can we group our data?   

]
--
.pull-right[
&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; schoolid &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; ppt &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; age &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; ABS &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; interv &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Blue River High School &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 12 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 64.9 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Blue River High School &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 13 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 54.7 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Blue River High School &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 14 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 45.7 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Blue River High School &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 15 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 48.9 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; ... &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; ... &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; ... &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; ... &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; NA &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
]

---
# The Grouping Structure  

.br2.f4.gray.bg-white[
(g)lmer(outcome ~ fixed effects + (random effects | grouping structure), family = error distribution)
]

.pull-left[
- In what different ways can we group our data?   

- Of the different ways we can group our data, which groupings are of specific inferential interest?  

- Of the different ways we can group our data, which groupings do we think of as a random sample from a general population of groups? 

]
.pull-right[
&gt; **Research Questions**
&gt; 1. How does the presentation of aggressive behaviours change with age?  

&gt;2. Is there any evidence for the efficacy of Parent Management Training (PMT) group sessions in reducing levels of adolescent aggression? 

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; schoolid &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; ppt &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; age &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; ABS &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; interv &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Blue River High School &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 12 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 64.9 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Blue River High School &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 13 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 54.7 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Blue River High School &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 14 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 45.7 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Blue River High School &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 15 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 48.9 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; ... &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; ... &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; ... &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; ... &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; NA &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
]
---
count:false
# The Grouping Structure  

.br2.f4.gray.bg-white[
(g)lmer(outcome ~ **fixed effects** + (random effects | grouping structure), family = error distribution)
]

.pull-left[
- In what different ways can we group our data?   

- **Of the different ways we can group our data, which groupings are of specific inferential interest?**  

- Of the different ways we can group our data, which groupings do we think of as a random sample from a general population of groups? 

]
.pull-right[
&gt; **Research Questions**
&gt; 1. How does the presentation of aggressive behaviours change with age?  

&gt;2. Is there any evidence for the efficacy of Parent Management Training (PMT) group sessions in reducing levels of adolescent aggression? 

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; schoolid &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; ppt &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; age &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; ABS &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; interv &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Blue River High School &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 12 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 64.9 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Blue River High School &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 13 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 54.7 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Blue River High School &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 14 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 45.7 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Blue River High School &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 15 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 48.9 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; ... &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; ... &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; ... &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; ... &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; NA &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
]
---
count:false
# The Grouping Structure  

.br2.f4.gray.bg-white[
(g)lmer(outcome ~ fixed effects + (random effects | **grouping structure**), family = error distribution)
]

.pull-left[
- In what different ways can we group our data?   

- Of the different ways we can group our data, which groupings are of specific inferential interest?  

- **Of the different ways we can group our data, which groupings do we think of as a random sample from a general population of groups?** 

]
.pull-right[
&gt; **Research Questions**
&gt; 1. How does the presentation of aggressive behaviours change with age?  

&gt;2. Is there any evidence for the efficacy of Parent Management Training (PMT) group sessions in reducing levels of adolescent aggression? 

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; schoolid &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; ppt &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; age &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; ABS &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; interv &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Blue River High School &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 12 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 64.9 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Blue River High School &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 13 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 54.7 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Blue River High School &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 14 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 45.7 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Blue River High School &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 15 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 48.9 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; ... &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; ... &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; ... &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; ... &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; NA &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
]
---
# The Grouping Structure  

.br2.f4.gray.bg-white[
(g)lmer(outcome ~ fixed effects + (random effects | **grouping structure**), family = error distribution)
]

.pull-left[
- In what different ways can we group our data?   

- Of the different ways we can group our data, which groupings are of specific inferential interest?  

- Of the different ways we can group our data, which groupings do we think of as a random sample from a general population of groups? 

  - Is there more than one grouping of this sort, and if so, are these groupings nested? Are the labels unique?  
  
  - For each level, how many groups have we sampled?  
]
--
.pull-right[


```r
nrow(absint)
```

```
## [1] 1528
```

```r
absint %&gt;% 
  mutate(schoolppt = interaction(schoolid,ppt)) %&gt;%
  summarise(across(everything(), n_distinct))
```

```
## # A tibble: 1 × 6
##   schoolid   ppt   age   ABS interv schoolppt
##      &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;  &lt;int&gt;     &lt;int&gt;
## 1       20    14     8   985      2       191
```

]
---
count: false
# The Grouping Structure  

.br2.f4.gray.bg-white[
(g)lmer(outcome ~ fixed effects + (random effects | **grouping structure**), family = error distribution)
]

.pull-left[
- In what different ways can we group our data?   

- Of the different ways we can group our data, which groupings are of specific inferential interest?  

- Of the different ways we can group our data, which groupings do we think of as a random sample from a general population of groups? 

  - Is there more than one grouping of this sort, and if so, are these groupings nested? Are the labels unique?  
  
  - For each level, how many groups have we sampled?  
]
.pull-right[


```r
table(absint$schoolid, absint$ppt)
```

```
##                                  
##                                   1 2 3 4 5 6 7 8 9 10 11 12 13 14
##   Blue River High School          8 8 8 8 8 8 8 8 0  0  0  0  0  0
##   Central Grammar School          8 8 8 8 8 8 8 8 8  8  8  0  0  0
##   Central High                    8 8 8 8 8 8 8 8 8  8  8  8  8  8
##   Clearwater Charter School       8 8 8 8 8 8 8 8 8  8  8  0  0  0
##   Clearwater School of Fine Arts  8 8 8 8 8 8 8 8 8  8  8  8  8  8
##   Coral Coast Institute           8 8 8 8 8 8 8 8 8  0  0  0  0  0
##   Eagle Mountain Technical School 8 8 8 8 8 8 8 8 8  0  0  0  0  0
##   Eastwood Institute              8 8 8 8 8 8 8 8 0  0  0  0  0  0
##   Edgewood Grammar School         8 8 8 8 8 8 8 8 0  0  0  0  0  0
##   Elk Grove School                8 8 8 8 8 8 8 0 0  0  0  0  0  0
##   Grand Mountain Elementary       8 8 8 8 8 8 8 8 0  0  0  0  0  0
##   Horizon Elementary              8 8 8 8 8 8 8 8 8  0  0  0  0  0
##   Liberty High                    8 8 8 8 8 8 8 8 8  8  8  0  0  0
##   Long Beach School               8 8 8 8 8 8 8 8 8  8  8  8  0  0
##   Oak Park Technical School       8 8 8 8 8 8 0 0 0  0  0  0  0  0
##   Seal Bay Middle School          8 8 8 8 8 8 8 8 8  8  0  0  0  0
##   South Fork Conservatory         8 8 8 8 8 8 8 8 8  8  8  0  0  0
##   Tranquillity Elementary         8 8 8 8 8 8 8 0 0  0  0  0  0  0
##   Tranquillity Middle School      8 8 8 8 8 8 8 8 0  0  0  0  0  0
##   Woodside University             8 8 8 8 8 8 8 8 8  8  0  0  0  0
```

]
---
# Random Intercepts and Slopes

.br2.f4.gray.bg-white[
(g)lmer(outcome ~ fixed effects + (**random effects** | grouping structure), family = error distribution)
]

.pull-left[

- Which of our fixed effects can vary for our random groups?  

  - "does a single group have multiple _distinct_ values for `\(x\)`?"  
  
  - "for the data from only one of our groups, can we estimate `\(y \sim x\)`?"

]
--
.pull-right[
All the data:
![](05_mlmresearch_files/figure-html/unnamed-chunk-11-1.svg)&lt;!-- --&gt;
Data from School == "Central High":
![](05_mlmresearch_files/figure-html/unnamed-chunk-12-1.svg)&lt;!-- --&gt;

]

---
# Random Intercepts and Slopes

.br2.f4.gray.bg-white[
(g)lmer(outcome ~ fixed effects + (**random effects** | grouping structure), family = error distribution)
]

.pull-left[

- Which of our fixed effects can vary for our random groups?  

  - "does a single group have multiple values for `\(x\)`?"  
  
  - "for the data from only one of our groups, can we estimate `\(y \sim x\)`?"

]
.pull-right[
All the data:
![](05_mlmresearch_files/figure-html/unnamed-chunk-13-1.svg)&lt;!-- --&gt;
Data from School == "Central High", Participant == "1":
![](05_mlmresearch_files/figure-html/unnamed-chunk-14-1.svg)&lt;!-- --&gt;

]

---
# Our model  
.br2.f4.gray.bg-white[
(g)lmer(outcome ~ fixed effects + (random effects | grouping structure), family = error distribution)
]
--
.br2.f4.green.bg-white[
&amp;nbsp; &amp;nbsp; &amp;nbsp; lmer(ABS &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; ~ age * interv + (1 + age &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; | &amp;nbsp; &amp;nbsp; schoolid&amp;nbsp; /&amp;nbsp; ppt&amp;nbsp; &amp;nbsp; )
]








---
class: inverse, center, middle

&lt;h2 style="text-align: left;opacity:0.3;"&gt;Part 1: Model Specification&lt;/h2&gt;
&lt;h2&gt;Part 2: Analysis&lt;/h2&gt;
&lt;h2 style="text-align: left;opacity:0.3;"&gt;Part 3: Reporting&lt;/h2&gt;


---
# Model issues

- Check for convergence issues &amp; singular fits. 

```r
absmod &lt;- lmer(ABS ~ age * interv + (1 + age | schoolid/ppt), data = absint,
     control = lmerControl(optimizer="bobyqa"), REML = TRUE)
```

```
## [1] "Normal exit from bobyqa"
```

--

- Check assumptions have been met

--

![](05_mlmresearch_files/figure-html/unnamed-chunk-19-1.svg)&lt;!-- --&gt;


---
# Model issues

- Convergence issues. 

```r
absmod &lt;- lmer(ABS ~ age * interv + (1 + age | schoolid/ppt), data = absint,
     control = lmerControl(optimizer="bobyqa"), REML = TRUE)
```

```
## [1] "Normal exit from bobyqa"
```

- Check assumptions have been met

.pull-left[
![](05_mlmresearch_files/figure-html/unnamed-chunk-22-1.svg)&lt;!-- --&gt;
]
.pull-right[
![](05_mlmresearch_files/figure-html/unnamed-chunk-23-1.svg)&lt;!-- --&gt;
]

---
# Model issues

- Convergence issues. 

```r
absmod &lt;- lmer(ABS ~ age * interv + (1 + age | schoolid/ppt), data = absint,
     control = lmerControl(optimizer="bobyqa"), REML = TRUE)
```

```
## [1] "Normal exit from bobyqa"
```

- Check assumptions have been met


```
## [1] "Shapiro-Wilk normality test resid(absmod) W=1, p=0.52"                          
## [2] "Shapiro-Wilk normality test ranef(absmod)$schoolid$`(Intercept)` W=0.91, p=0.06"
## [3] "Shapiro-Wilk normality test ranef(absmod)$schoolid$age W=0.93, p=0.13"          
## [4] "Shapiro-Wilk normality test ranef(absmod)$ppt$`(Intercept)` W=0.99, p=0.26"     
## [5] "Shapiro-Wilk normality test ranef(absmod)$ppt$age W=0.99, p=0.25"
```

---
# Model issues

- Convergence issues. 

```r
absmod &lt;- lmer(ABS ~ age * interv + (1 + age | schoolid/ppt), data = absint,
     control = lmerControl(optimizer="bobyqa"), REML = TRUE)
```

```
## [1] "Normal exit from bobyqa"
```

- Check assumptions have been met

![](05_mlmresearch_files/figure-html/unnamed-chunk-29-1.svg)&lt;!-- --&gt;

---
# Inference

.pull-left[
## Tests

- Model comparison

- Parameter estimates


]
.pull-right[
## Methods

- df approximations
  
- Likelihood Ratio Tests  
  `anova(model1, model2, ...)`
- Bootstrap
  - parametric bootstrap
    `pbkrtest::PBmodcomp()` and `confint(method="boot")`
  - case bootstrap
    `lmeresampler::bootstrap(model, type = "case", resample = c(....))`
]

---
# Inference

e.g.:  

```r
absmod &lt;- lmerTest::lmer(ABS ~ age * interv + (1 + age | schoolid/ppt), data = absint,
     control = lmerControl(optimizer="bobyqa"), REML = TRUE)
```
```
Random effects:
 Groups       Name        Variance Std.Dev. Corr
 ppt:schoolid (Intercept) 19.269   4.390        
              age          7.808   2.794    0.93
 schoolid     (Intercept)  8.101   2.846        
              age          0.786   0.887    0.68
 Residual                 79.785   8.932        
Number of obs: 984, groups:  ppt:schoolid, 191; schoolid, 20

Fixed effects:
            Estimate Std. Error     df t value Pr(&gt;|t|)    
(Intercept)   50.455      1.218 17.732   41.41   &lt;2e-16 ***
age            0.633      0.486 17.521    1.30    0.210    
interv1       -0.295      1.734 18.245   -0.17    0.867    
age:interv1   -1.709      0.695 18.576   -2.46    0.024 *  
---
Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1
```









---
class: inverse, center, middle

&lt;h2 style="text-align: left;opacity:0.3;"&gt;Part 1: Model Specification&lt;/h2&gt;
&lt;h2 style="text-align: left;opacity:0.3;"&gt;Part 2: Analysis&lt;/h2&gt;
&lt;h2&gt;Part 3: Reporting&lt;/h2&gt;

---
# Reporting the analysis process

- Data cleaning outlier/data removal, transformations _prior to_ analysis.  

- Unplanned transformations and data removal which are carried out in order to meet assumptions.  

--

- Specify all fixed effects (explanatory variables &amp; covariates).  
Link them to explicitly stated research questions/hypotheses. 

- Explicitly state the hierarchical structure of the data and of the model.  
Specify random effects according to the sampling units (schools/children etc) with which they interact. 

--

- State the software packages and versions used to fit the model(s), along with the estimation method (ML/REML) and optimiser used.   

- If a proposed model fails to converge, clearly specify the procedure used to obtain converging model.  

--

- State clearly the relevant test/comparison/parameter estimate of interest.  
Link to explicitly stated research questions/hypotheses.  
  - Any model comparisons should be clearly stated so that the reader understands the structure of both models being compared.  

- Specify the method you plan to use to conduct inference (e.g. LRT, bootstrap)

---
# Reporting results from the model(s)

.pull-left[
Information to include:

- all parameter estimates for fixed effects.  

    - coefficients
    - standard errors and/or confidence intervals
    - associated test statistics and p-values (if used)  
    
{{content}} 
]  
--

- random effects  

  - standard deviation and/or variance for each random effect
  - correlations/covariances if modelled   
  - residual variance/standard deviation
  
{{content}}
  
--

- some measure of model fit (marginal/conditional `\(R^2\)`)



---
count:false
# Reporting results from the model(s)

.pull-left[
Information to include:

- all parameter estimates for fixed effects.  

    - coefficients
    - standard errors and/or confidence intervals
    - associated test statistics and p-values (if used)  
    
- random effects  

  - standard deviation and/or variance for each random effect
  - correlations/covariances if modelled  
  - residual variance/standard deviation  
  
- some measure of model fit (marginal/conditional `\(R^2\)`)  

&lt;br&gt;
`sjPlot::tab_model()` gets you a lot of the way there! 

]
.pull-right[
&lt;small&gt;
&lt;table style="border-collapse:collapse; border:none;"&gt;
&lt;tr&gt;
&lt;th style="border-top: double; text-align:center; font-style:normal; font-weight:bold; padding:0.2cm;  text-align:left; "&gt;&amp;nbsp;&lt;/th&gt;
&lt;th colspan="2" style="border-top: double; text-align:center; font-style:normal; font-weight:bold; padding:0.2cm; "&gt;ABS&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  text-align:left; "&gt;Predictors&lt;/td&gt;
&lt;td style=" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  "&gt;Estimates&lt;/td&gt;
&lt;td style=" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  "&gt;CI&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; "&gt;(Intercept)&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  "&gt;50.45&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  "&gt;48.06&amp;nbsp;&amp;ndash;&amp;nbsp;52.85&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; "&gt;age&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  "&gt;0.63&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  "&gt;&amp;#45;0.32&amp;nbsp;&amp;ndash;&amp;nbsp;1.59&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; "&gt;interv [1]&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  "&gt;&amp;#45;0.30&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  "&gt;&amp;#45;3.70&amp;nbsp;&amp;ndash;&amp;nbsp;3.11&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; "&gt;age * interv [1]&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  "&gt;&amp;#45;1.71&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  "&gt;&amp;#45;3.07&amp;nbsp;&amp;ndash;&amp;nbsp;-0.35&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td colspan="3" style="font-weight:bold; text-align:left; padding-top:.8em;"&gt;Random Effects&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; padding-top:0.1cm; padding-bottom:0.1cm;"&gt;&amp;sigma;&lt;sup&gt;2&lt;/sup&gt;&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; padding-top:0.1cm; padding-bottom:0.1cm; text-align:left;" colspan="2"&gt;79.79&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; padding-top:0.1cm; padding-bottom:0.1cm;"&gt;&amp;tau;&lt;sub&gt;00&lt;/sub&gt; &lt;sub&gt;ppt:schoolid&lt;/sub&gt;&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; padding-top:0.1cm; padding-bottom:0.1cm; text-align:left;" colspan="2"&gt;19.27&lt;/td&gt;

&lt;tr&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; padding-top:0.1cm; padding-bottom:0.1cm;"&gt;&amp;tau;&lt;sub&gt;00&lt;/sub&gt; &lt;sub&gt;schoolid&lt;/sub&gt;&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; padding-top:0.1cm; padding-bottom:0.1cm; text-align:left;" colspan="2"&gt;8.10&lt;/td&gt;

&lt;tr&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; padding-top:0.1cm; padding-bottom:0.1cm;"&gt;&amp;tau;&lt;sub&gt;11&lt;/sub&gt; &lt;sub&gt;ppt:schoolid.age&lt;/sub&gt;&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; padding-top:0.1cm; padding-bottom:0.1cm; text-align:left;" colspan="2"&gt;7.81&lt;/td&gt;

&lt;tr&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; padding-top:0.1cm; padding-bottom:0.1cm;"&gt;&amp;tau;&lt;sub&gt;11&lt;/sub&gt; &lt;sub&gt;schoolid.age&lt;/sub&gt;&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; padding-top:0.1cm; padding-bottom:0.1cm; text-align:left;" colspan="2"&gt;0.79&lt;/td&gt;

&lt;tr&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; padding-top:0.1cm; padding-bottom:0.1cm;"&gt;&amp;rho;&lt;sub&gt;01&lt;/sub&gt; &lt;sub&gt;ppt:schoolid&lt;/sub&gt;&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; padding-top:0.1cm; padding-bottom:0.1cm; text-align:left;" colspan="2"&gt;0.93&lt;/td&gt;

&lt;tr&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; padding-top:0.1cm; padding-bottom:0.1cm;"&gt;&amp;rho;&lt;sub&gt;01&lt;/sub&gt; &lt;sub&gt;schoolid&lt;/sub&gt;&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; padding-top:0.1cm; padding-bottom:0.1cm; text-align:left;" colspan="2"&gt;0.68&lt;/td&gt;

&lt;tr&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; padding-top:0.1cm; padding-bottom:0.1cm;"&gt;ICC&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; padding-top:0.1cm; padding-bottom:0.1cm; text-align:left;" colspan="2"&gt;0.65&lt;/td&gt;

&lt;tr&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; padding-top:0.1cm; padding-bottom:0.1cm;"&gt;N &lt;sub&gt;ppt&lt;/sub&gt;&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; padding-top:0.1cm; padding-bottom:0.1cm; text-align:left;" colspan="2"&gt;14&lt;/td&gt;

&lt;tr&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; padding-top:0.1cm; padding-bottom:0.1cm;"&gt;N &lt;sub&gt;schoolid&lt;/sub&gt;&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; padding-top:0.1cm; padding-bottom:0.1cm; text-align:left;" colspan="2"&gt;20&lt;/td&gt;
&lt;tr&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; padding-top:0.1cm; padding-bottom:0.1cm; border-top:1px solid;"&gt;Marginal R&lt;sup&gt;2&lt;/sup&gt; / Conditional R&lt;sup&gt;2&lt;/sup&gt;&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; padding-top:0.1cm; padding-bottom:0.1cm; text-align:left; border-top:1px solid;" colspan="2"&gt;0.026 / 0.659&lt;/td&gt;
&lt;/tr&gt;

&lt;/table&gt;
&lt;/small&gt;
]


---
# Visualising the model(s)  

- Think about your questions  

.pull-left[
![](05_mlmresearch_files/figure-html/unnamed-chunk-33-1.svg)&lt;!-- --&gt;
]
.pull-right[
&gt; **Research Questions**
&gt; 1. How does the presentation of aggressive behaviours change with age?  

&gt;2. Is there any evidence for the efficacy of Parent Management Training (PMT) group sessions in reducing levels of adolescent aggression? 
]

---
# Visualising the model(s)

.pull-left[
There's always `sjPlot::plot_model()`!
![](05_mlmresearch_files/figure-html/unnamed-chunk-34-1.svg)&lt;!-- --&gt;
]
--
.pull-right[
But plotting manually gives you more control:
![](05_mlmresearch_files/figure-html/unnamed-chunk-35-1.svg)&lt;!-- --&gt;
]

---
class: inverse, center, middle, animated, rotateInDownLeft

# End
## Thanks for listening!

    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script src="jk_libs/macros.js"></script>
<script>var slideshow = remark.create({
"ratio": "16:9",
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
